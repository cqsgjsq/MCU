													2020_3_12
Q:不接CAN总线时，有UDE，可正常进行仿真测试，但是一插上CAN总线，程序就一直复位！
刚开始以为是kl30/15短路了，后来认为是CAN线短路了，用万用表测量，正常，后来发现是电源有电流保护，所以导致复位了......
A：排查问题时，首先从电源开始排查!!!

要排查频繁上下电的问题(such as进入了低功耗，或异常状态)，首先要了解reset期间，各个元器件的状态

SPC的fccu引脚不能被拉低，否则其他引脚输出低电平的时候，实际会输出1V左右的电压；
在reset之后，大部分IO引脚是weak pull，用万用表测试该引脚是5V，但是并不是真的输出5V，其输出电流能力很差，接上负载后，电压会被拉低，就不是5V了，所以还是看实际情况；（硬件基础知识太薄弱了）
关于SBC每163ms复位的问题，虽然调试代码显示是WD复位导致的，但是太相信胡工了。。。以为他用过同样的平台，结果还是在WD的时候读取的数据没有左移8位。。。

所以除去不可能的因素，剩下的即使多么的不合情理，但那一定就是事实的真相。。。适用于所有工程师这个职业。。。真的至理名言!!!
关于stm8a复位的问题应该就是重启后，操作eeprom的时间太长了。。。导致没有在long open window喂狗成功，所以才一直复位,
在关于时间的操作，可以利用time_flag,来多一个判断；
一定要注意在MCU init的时间内，各个硬件元器件引脚的状态，特别的重要，这些小细节如果最开始不排查，后期出现问题，肯定会不好排查的
还要注意对驱动的检查，比如SPI通信，要用示波器观察硬件是否按照程序规定的周期发送命令！

7040multsense输出，其内部有电阻，所以其输出不能直接连接到MCU的IO口，需要一个外部下拉电阻，该阻值的取值要根据相关状态来决定，
